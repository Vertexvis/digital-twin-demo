import { calcRedToGreenGradient } from './colors';

export interface TimeSeriesData {
  ids: string[];
  sensors: Sensors;
  sensorsMeta: SensorMeta[];
  sensorsToIds: SensorsToItemSuppliedIds;
}

export interface Sensors {
  [key: string]: Sensor;
}

export interface Sensor {
  readonly data: SensorData[];
  readonly meta: SensorMeta;
}

export interface SensorMeta {
  readonly id: string;
  readonly itemSuppliedIds: string[];
  readonly tsData: TsData;
  readonly name: string;
}

export interface SensorData {
  readonly avg: number;
  readonly min: number;
  readonly max: number;
  readonly std: number;
  readonly timestamp: string;
}

export interface FaultCode {
  id: string;
  severity: 'warn' | 'error';
  title: string;
  timestamp: string;
}

export interface SensorsToItemSuppliedIds {
  [id: string]: string[];
}

interface StreamKeyToSensorsToItemSuppliedIds {
  [streamKey: string]: SensorsToItemSuppliedIds;
}

export interface RawSensors {
  [key: string]: RawSensor;
}

interface RawSensor {
  readonly data: SensorData[];
  readonly meta: RawSensorMeta;
}

interface RawSensorMeta {
  readonly id: string;
  readonly name: string;
}

interface TsData {
  [timestamp: string]: { color: string; value: number };
}

export const MinValue = 5;

export const MaxValue = 15;

export const Assets = ['N905NA', 'N772UA', 'N29961'];

export const Faults: FaultCode[] = [
  {
    id: '1',
    severity: 'warn',
    title: 'SCU maintenance',
    timestamp: '2021-04-01T12:15:01.000Z',
  },
  {
    id: '2',
    severity: 'error',
    title: 'CCU malfunction',
    timestamp: '2021-04-01T12:15:07.000Z',
  },
];

const data: RawSensors = {
  '1': {
    data: [
      {
        timestamp: '2021-04-01T12:15:00.000Z',
        min: 8.70014202609066,
        max: 12.273953175143436,
        avg: 8.866744096563322,
        std: 0.43190737253840616,
      },
      {
        timestamp: '2021-04-01T12:15:01.000Z',
        min: 8.52223700332326,
        max: 13.269653157204033,
        avg: 10.169611771775646,
        std: 0.1608068759356195,
      },
      {
        timestamp: '2021-04-01T12:15:02.000Z',
        min: 13.011837935090027,
        max: 14.103531189410894,
        avg: 13.311449448185442,
        std: 0.14024183459523798,
      },
      {
        timestamp: '2021-04-01T12:15:03.000Z',
        min: 8.82542535840308,
        max: 11.483917991964205,
        avg: 8.99432093471993,
        std: 0.09244485599588326,
      },
      {
        timestamp: '2021-04-01T12:15:04.000Z',
        min: 11.794849126122402,
        max: 12.063674315315517,
        avg: 11.85725084239782,
        std: 0.09905648898312003,
      },
      {
        timestamp: '2021-04-01T12:15:05.000Z',
        min: 12.459796327816314,
        max: 13.13772287950892,
        avg: 13.057886740214203,
        std: 0.3635757043218937,
      },
      {
        timestamp: '2021-04-01T12:15:06.000Z',
        min: 9.35757065398034,
        max: 13.173866384838032,
        avg: 11.34597924673626,
        std: 0.36345795223388444,
      },
      {
        timestamp: '2021-04-01T12:15:07.000Z',
        min: 7.957008428755956,
        max: 13.326569635162903,
        avg: 9.937311697068566,
        std: 0.05999174805968177,
      },
      {
        timestamp: '2021-04-01T12:15:08.000Z',
        min: 7.268596267343539,
        max: 11.141260909322117,
        avg: 10.503323249090784,
        std: 0.459220990291613,
      },
      {
        timestamp: '2021-04-01T12:15:09.000Z',
        min: 14.025051415698277,
        max: 14.357338852146047,
        avg: 14.2188614113452,
        std: 0.012115524183799464,
      },
      {
        timestamp: '2021-04-01T12:15:10.000Z',
        min: 5.704721815104068,
        max: 11.399535874465883,
        avg: 6.3739345130397105,
        std: 0.4985399538443277,
      },
      {
        timestamp: '2021-04-01T12:15:11.000Z',
        min: 8.246847029278552,
        max: 12.630603274531943,
        avg: 8.43524081647758,
        std: 0.2573081959453174,
      },
      {
        timestamp: '2021-04-01T12:15:12.000Z',
        min: 8.980334910307306,
        max: 10.026764195377178,
        avg: 9.124563706564976,
        std: 0.4263797303490584,
      },
      {
        timestamp: '2021-04-01T12:15:13.000Z',
        min: 12.515208988432656,
        max: 12.781019703672806,
        avg: 12.719599701810857,
        std: 0.27700736057334807,
      },
      {
        timestamp: '2021-04-01T12:15:14.000Z',
        min: 6.909547419808517,
        max: 14.652328923297585,
        avg: 9.78060196109476,
        std: 0.14089750549587687,
      },
    ],
    meta: { id: '1', name: 'ECU' },
  },
  '2': {
    data: [
      {
        timestamp: '2021-04-01T12:15:00.000Z',
        min: 7.468300061282194,
        max: 8.222337944715639,
        avg: 7.609117848841761,
        std: 0.23439027704970317,
      },
      {
        timestamp: '2021-04-01T12:15:01.000Z',
        min: 8.219812128150785,
        max: 14.951106808686541,
        avg: 8.277977823120132,
        std: 0.4459835943477408,
      },
      {
        timestamp: '2021-04-01T12:15:02.000Z',
        min: 7.314938144461809,
        max: 12.34282269855855,
        avg: 9.966929307423404,
        std: 0.33331129207810684,
      },
      {
        timestamp: '2021-04-01T12:15:03.000Z',
        min: 13.358772957521563,
        max: 13.957196943413088,
        avg: 13.728957834086957,
        std: 0.46163381247613544,
      },
      {
        timestamp: '2021-04-01T12:15:04.000Z',
        min: 12.55567991835208,
        max: 13.016984246177902,
        avg: 12.835435953448057,
        std: 0.06743356808759526,
      },
      {
        timestamp: '2021-04-01T12:15:05.000Z',
        min: 9.809846593547224,
        max: 12.406736656393536,
        avg: 10.84946769511682,
        std: 0.2801117545462952,
      },
      {
        timestamp: '2021-04-01T12:15:06.000Z',
        min: 7.730335802535116,
        max: 13.403361075823678,
        avg: 9.619496754756488,
        std: 0.0018359762701719573,
      },
      {
        timestamp: '2021-04-01T12:15:07.000Z',
        min: 11.192831747578536,
        max: 11.411857659350122,
        avg: 11.340109737164056,
        std: 0.059538110365072505,
      },
      {
        timestamp: '2021-04-01T12:15:08.000Z',
        min: 8.17932234721382,
        max: 8.766062478724574,
        avg: 8.363007525467541,
        std: 0.4715421030530782,
      },
      {
        timestamp: '2021-04-01T12:15:09.000Z',
        min: 6.873534390460829,
        max: 12.483146730936348,
        avg: 8.571405011172658,
        std: 0.36417372704606166,
      },
      {
        timestamp: '2021-04-01T12:15:10.000Z',
        min: 6.800873098351388,
        max: 6.962169129314525,
        avg: 6.938148817714034,
        std: 0.04179667158983258,
      },
      {
        timestamp: '2021-04-01T12:15:11.000Z',
        min: 12.911412744111901,
        max: 14.898825682549317,
        avg: 13.208843290114336,
        std: 0.2800544711550337,
      },
      {
        timestamp: '2021-04-01T12:15:12.000Z',
        min: 12.658781321886243,
        max: 13.269330983400845,
        avg: 12.900390794705048,
        std: 0.3561827879903957,
      },
      {
        timestamp: '2021-04-01T12:15:13.000Z',
        min: 12.01435014843721,
        max: 12.522732372332941,
        avg: 12.336277325930821,
        std: 0.15359668600353615,
      },
      {
        timestamp: '2021-04-01T12:15:14.000Z',
        min: 12.237511081482715,
        max: 14.790919347965543,
        avg: 12.851439628509986,
        std: 0.26577289984738006,
      },
    ],
    meta: { id: '2', name: 'TCU' },
  },
  '3': {
    data: [
      {
        timestamp: '2021-04-01T12:15:00.000Z',
        min: 5.369598553082819,
        max: 14.762324352622645,
        avg: 5.546574950460535,
        std: 0.11258702093002226,
      },
      {
        timestamp: '2021-04-01T12:15:01.000Z',
        min: 12.66955372471565,
        max: 14.18344068459588,
        avg: 14.16391166245726,
        std: 0.3665352988366274,
      },
      {
        timestamp: '2021-04-01T12:15:02.000Z',
        min: 10.766488344935485,
        max: 11.299233952572385,
        avg: 11.256385673504944,
        std: 0.09331154185299151,
      },
      {
        timestamp: '2021-04-01T12:15:03.000Z',
        min: 8.956105270929156,
        max: 10.699597859981976,
        avg: 10.516830766820854,
        std: 0.3988619076037774,
      },
      {
        timestamp: '2021-04-01T12:15:04.000Z',
        min: 12.657182128611183,
        max: 14.85748415314788,
        avg: 12.98092074239587,
        std: 0.48487408029080603,
      },
      {
        timestamp: '2021-04-01T12:15:05.000Z',
        min: 14.825712621136587,
        max: 14.847669455303832,
        avg: 14.829855482053024,
        std: 0.09340675172118251,
      },
      {
        timestamp: '2021-04-01T12:15:06.000Z',
        min: 9.19031912860806,
        max: 13.052025219965653,
        avg: 11.8131134281694,
        std: 0.3948805811477786,
      },
      {
        timestamp: '2021-04-01T12:15:07.000Z',
        min: 11.14504334813528,
        max: 11.669076545448055,
        avg: 11.252905373445163,
        std: 0.09974766649216527,
      },
      {
        timestamp: '2021-04-01T12:15:08.000Z',
        min: 13.45525488183222,
        max: 14.570820938580672,
        avg: 14.386526865913657,
        std: 0.06602599020273836,
      },
      {
        timestamp: '2021-04-01T12:15:09.000Z',
        min: 11.293734709715963,
        max: 13.035481995349217,
        avg: 11.637393401071932,
        std: 0.2605059630422588,
      },
      {
        timestamp: '2021-04-01T12:15:10.000Z',
        min: 11.106486523942307,
        max: 12.738525755400929,
        avg: 12.683707570201719,
        std: 0.3746638381813928,
      },
      {
        timestamp: '2021-04-01T12:15:11.000Z',
        min: 12.931423800729306,
        max: 14.933200660182276,
        avg: 14.80544649433314,
        std: 0.26669302969199893,
      },
      {
        timestamp: '2021-04-01T12:15:12.000Z',
        min: 10.948070284939375,
        max: 12.627146643218246,
        avg: 11.236471350615885,
        std: 0.01947196016216124,
      },
      {
        timestamp: '2021-04-01T12:15:13.000Z',
        min: 13.77076239573694,
        max: 14.818035787911402,
        avg: 14.795692297742706,
        std: 0.04931010158568183,
      },
      {
        timestamp: '2021-04-01T12:15:14.000Z',
        min: 10.0638632573122,
        max: 13.8010331168988,
        avg: 12.38860018127233,
        std: 0.030220348758586257,
      },
    ],
    meta: { id: '3', name: 'CCU' },
  },
  '4': {
    data: [
      {
        timestamp: '2021-04-01T12:15:00.000Z',
        min: 10.696994073544149,
        max: 14.220843205770215,
        avg: 13.32824104816207,
        std: 0.4405486916776449,
      },
      {
        timestamp: '2021-04-01T12:15:01.000Z',
        min: 11.841316155824614,
        max: 14.600638668466178,
        avg: 12.0425263113704,
        std: 0.28115834365181014,
      },
      {
        timestamp: '2021-04-01T12:15:02.000Z',
        min: 6.410069136187653,
        max: 11.31356599110627,
        avg: 10.742602141480155,
        std: 0.3069331006155849,
      },
      {
        timestamp: '2021-04-01T12:15:03.000Z',
        min: 8.144671058067036,
        max: 14.649385064343647,
        avg: 10.35270628449642,
        std: 0.12480465227449022,
      },
      {
        timestamp: '2021-04-01T12:15:04.000Z',
        min: 8.92945176732754,
        max: 10.898183718754204,
        avg: 10.7261062682348,
        std: 0.06772730318273512,
      },
      {
        timestamp: '2021-04-01T12:15:05.000Z',
        min: 7.696686453337804,
        max: 12.231260088110492,
        avg: 11.232446740847934,
        std: 0.3771134373922552,
      },
      {
        timestamp: '2021-04-01T12:15:06.000Z',
        min: 6.498125944412736,
        max: 11.886939581434856,
        avg: 9.798570462688573,
        std: 0.3492940395079698,
      },
      {
        timestamp: '2021-04-01T12:15:07.000Z',
        min: 14.308520258941792,
        max: 14.510917823841153,
        avg: 14.386887745875422,
        std: 0.2933463304658951,
      },
      {
        timestamp: '2021-04-01T12:15:08.000Z',
        min: 9.026232446705462,
        max: 11.01755593274868,
        avg: 10.339081006599653,
        std: 0.20902863670698113,
      },
      {
        timestamp: '2021-04-01T12:15:09.000Z',
        min: 8.919341152481667,
        max: 13.456318796840986,
        avg: 12.545174471288416,
        std: 0.032500647757815804,
      },
      {
        timestamp: '2021-04-01T12:15:10.000Z',
        min: 9.811033788659225,
        max: 13.161493365960055,
        avg: 10.717732167549949,
        std: 0.02019607516920774,
      },
      {
        timestamp: '2021-04-01T12:15:11.000Z',
        min: 5.212380040895111,
        max: 7.016548377385098,
        avg: 6.5354943968838475,
        std: 0.24891757499413403,
      },
      {
        timestamp: '2021-04-01T12:15:12.000Z',
        min: 14.929631031072502,
        max: 14.996566963360323,
        avg: 14.98728116814729,
        std: 0.11167425448695179,
      },
      {
        timestamp: '2021-04-01T12:15:13.000Z',
        min: 7.002715869270624,
        max: 11.441295390635815,
        avg: 10.664653942040292,
        std: 0.2088993917760188,
      },
      {
        timestamp: '2021-04-01T12:15:14.000Z',
        min: 10.747952660996852,
        max: 11.906917415868815,
        avg: 11.798452262630127,
        std: 0.13417338800940126,
      },
    ],
    meta: { id: '4', name: 'RCU' },
  },
  '5': {
    data: [
      {
        timestamp: '2021-04-01T12:15:00.000Z',
        min: 14.54308432041396,
        max: 14.713522047444432,
        avg: 14.635555651808227,
        std: 0.07895791483307069,
      },
      {
        timestamp: '2021-04-01T12:15:01.000Z',
        min: 11.424832376360639,
        max: 13.098960996462441,
        avg: 13.030404560631938,
        std: 0.08641348368305268,
      },
      {
        timestamp: '2021-04-01T12:15:02.000Z',
        min: 6.094315972768404,
        max: 6.977643311046355,
        avg: 6.38274707625711,
        std: 0.006792145207672462,
      },
      {
        timestamp: '2021-04-01T12:15:03.000Z',
        min: 6.707910873625076,
        max: 9.811382321762212,
        avg: 7.615623517116989,
        std: 0.43708573537289486,
      },
      {
        timestamp: '2021-04-01T12:15:04.000Z',
        min: 8.03780896336367,
        max: 10.44854470734393,
        avg: 9.655207967334501,
        std: 0.20624319347306752,
      },
      {
        timestamp: '2021-04-01T12:15:05.000Z',
        min: 7.164283940766905,
        max: 10.187120365933048,
        avg: 8.524768092229332,
        std: 0.09649062915084472,
      },
      {
        timestamp: '2021-04-01T12:15:06.000Z',
        min: 10.629808689976594,
        max: 13.14838505961324,
        avg: 12.813255196317401,
        std: 0.3884060105142374,
      },
      {
        timestamp: '2021-04-01T12:15:07.000Z',
        min: 9.155176214078997,
        max: 12.96780635936339,
        avg: 9.580292211401959,
        std: 0.47674329913682834,
      },
      {
        timestamp: '2021-04-01T12:15:08.000Z',
        min: 5.128910447537052,
        max: 7.3104594159110095,
        avg: 6.109126874556319,
        std: 0.2510806794967283,
      },
      {
        timestamp: '2021-04-01T12:15:09.000Z',
        min: 11.357368608965022,
        max: 12.982766067252701,
        avg: 12.314894379129909,
        std: 0.14628193854992289,
      },
      {
        timestamp: '2021-04-01T12:15:10.000Z',
        min: 8.563292655491129,
        max: 12.779419198913214,
        avg: 11.458248019594535,
        std: 0.1101983897411063,
      },
      {
        timestamp: '2021-04-01T12:15:11.000Z',
        min: 10.081044536764892,
        max: 12.65002222499707,
        avg: 10.892711396887231,
        std: 0.3553800807902926,
      },
      {
        timestamp: '2021-04-01T12:15:12.000Z',
        min: 9.125028311097324,
        max: 12.513781468133022,
        avg: 11.57265026568609,
        std: 0.15267815566497,
      },
      {
        timestamp: '2021-04-01T12:15:13.000Z',
        min: 12.51096274025722,
        max: 14.71167223032333,
        avg: 13.318940393610886,
        std: 0.272618246309973,
      },
      {
        timestamp: '2021-04-01T12:15:14.000Z',
        min: 12.437462099187208,
        max: 14.56857445548518,
        avg: 14.272711406409167,
        std: 0.3761464227042497,
      },
    ],
    meta: { id: '5', name: 'ACU' },
  },
  '6': {
    data: [
      {
        timestamp: '2021-04-01T12:15:00.000Z',
        min: 13.579656813534712,
        max: 14.389044504193082,
        avg: 13.839803133621185,
        std: 0.3355569486516863,
      },
      {
        timestamp: '2021-04-01T12:15:01.000Z',
        min: 14.946761164564464,
        max: 14.950096469585139,
        avg: 14.950044811917175,
        std: 0.348766229712283,
      },
      {
        timestamp: '2021-04-01T12:15:02.000Z',
        min: 10.845236607036972,
        max: 14.258753374129473,
        avg: 13.285779108677094,
        std: 0.23314601603029905,
      },
      {
        timestamp: '2021-04-01T12:15:03.000Z',
        min: 9.043714589744008,
        max: 10.800887657912511,
        avg: 9.416942079903853,
        std: 0.3837379649370869,
      },
      {
        timestamp: '2021-04-01T12:15:04.000Z',
        min: 12.532956837407454,
        max: 14.497462501954779,
        avg: 12.581567346766823,
        std: 0.03387843743897523,
      },
      {
        timestamp: '2021-04-01T12:15:05.000Z',
        min: 5.993188613455422,
        max: 10.902515732215303,
        avg: 6.991644962743388,
        std: 0.39502116801428233,
      },
      {
        timestamp: '2021-04-01T12:15:06.000Z',
        min: 11.029906738794782,
        max: 13.983205371150703,
        avg: 12.049702986806505,
        std: 0.02720379361250691,
      },
      {
        timestamp: '2021-04-01T12:15:07.000Z',
        min: 14.816140750200525,
        max: 14.934128393964375,
        avg: 14.842634221207453,
        std: 0.10223577390890759,
      },
      {
        timestamp: '2021-04-01T12:15:08.000Z',
        min: 12.467585439009552,
        max: 14.277910005290575,
        avg: 14.1585777134859,
        std: 0.4463698707219126,
      },
      {
        timestamp: '2021-04-01T12:15:09.000Z',
        min: 12.013014220336384,
        max: 13.967791670450177,
        avg: 12.967716402949499,
        std: 0.007392814680464155,
      },
      {
        timestamp: '2021-04-01T12:15:10.000Z',
        min: 10.430118990143022,
        max: 12.708445941471544,
        avg: 12.259915919030576,
        std: 0.26557971298587846,
      },
      {
        timestamp: '2021-04-01T12:15:11.000Z',
        min: 12.299438643924596,
        max: 14.494537761459046,
        avg: 12.330344281603603,
        std: 0.31420221629415634,
      },
      {
        timestamp: '2021-04-01T12:15:12.000Z',
        min: 11.401011946588094,
        max: 12.871511782814261,
        avg: 11.632411647051544,
        std: 0.07790919560868914,
      },
      {
        timestamp: '2021-04-01T12:15:13.000Z',
        min: 5.197485734922562,
        max: 7.635402939643955,
        avg: 5.770215553172267,
        std: 0.3928567046929047,
      },
      {
        timestamp: '2021-04-01T12:15:14.000Z',
        min: 11.1786799653143,
        max: 12.8881303354599,
        avg: 11.66023799735762,
        std: 0.2425622508540386,
      },
    ],
    meta: { id: '6', name: 'LCU' },
  },
  '7': {
    data: [
      {
        timestamp: '2021-04-01T12:15:00.000Z',
        min: 6.914986396054541,
        max: 8.598123619453537,
        avg: 8.14539287301563,
        std: 0.10963909102204628,
      },
      {
        timestamp: '2021-04-01T12:15:01.000Z',
        min: 8.289855528830842,
        max: 14.555230386996495,
        avg: 12.441333549469919,
        std: 0.47776989317835905,
      },
      {
        timestamp: '2021-04-01T12:15:02.000Z',
        min: 13.275042245689617,
        max: 13.443017932981718,
        avg: 13.42110810769034,
        std: 0.17474291450481294,
      },
      {
        timestamp: '2021-04-01T12:15:03.000Z',
        min: 9.404953677006993,
        max: 14.755554526019274,
        avg: 12.350433504056321,
        std: 0.2634506819001544,
      },
      {
        timestamp: '2021-04-01T12:15:04.000Z',
        min: 6.505453793877263,
        max: 9.716837744032473,
        avg: 9.374678496635173,
        std: 0.08979342354748199,
      },
      {
        timestamp: '2021-04-01T12:15:05.000Z',
        min: 8.062520656510635,
        max: 8.183493824150922,
        avg: 8.173153943962086,
        std: 0.24352744658917524,
      },
      {
        timestamp: '2021-04-01T12:15:06.000Z',
        min: 13.661686120625568,
        max: 13.79661525840797,
        avg: 13.780035621084382,
        std: 0.16634140453128266,
      },
      {
        timestamp: '2021-04-01T12:15:07.000Z',
        min: 14.64206130927716,
        max: 14.86389890895172,
        avg: 14.85649770805664,
        std: 0.35522203799587315,
      },
      {
        timestamp: '2021-04-01T12:15:08.000Z',
        min: 5.648860122134163,
        max: 6.624923013961831,
        avg: 5.7639691431415585,
        std: 0.3499008844795827,
      },
      {
        timestamp: '2021-04-01T12:15:09.000Z',
        min: 8.459317635721535,
        max: 8.769411385984686,
        avg: 8.742555795701783,
        std: 0.39241797782253995,
      },
      {
        timestamp: '2021-04-01T12:15:10.000Z',
        min: 14.842904632771637,
        max: 14.912071759634973,
        avg: 14.860395406426699,
        std: 0.17288186599923638,
      },
      {
        timestamp: '2021-04-01T12:15:11.000Z',
        min: 12.300149960742319,
        max: 12.668326669349153,
        avg: 12.609458669030133,
        std: 0.44886583466151087,
      },
      {
        timestamp: '2021-04-01T12:15:12.000Z',
        min: 6.150251849076492,
        max: 9.297847504550209,
        avg: 8.259930620321054,
        std: 0.22535839769523835,
      },
      {
        timestamp: '2021-04-01T12:15:13.000Z',
        min: 7.394767877296391,
        max: 13.135636102855667,
        avg: 9.413359168735418,
        std: 0.24859165504579317,
      },
      {
        timestamp: '2021-04-01T12:15:14.000Z',
        min: 11.955950964883119,
        max: 12.514392193728694,
        avg: 12.152391848188458,
        std: 0.42557034947089345,
      },
    ],
    meta: { id: '7', name: 'SCU' },
  },
  '8': {
    data: [
      {
        timestamp: '2021-04-01T12:15:00.000Z',
        min: 6.604864201451921,
        max: 13.392349182648822,
        avg: 12.511231310703078,
        std: 0.33869843122775245,
      },
      {
        timestamp: '2021-04-01T12:15:01.000Z',
        min: 8.191995779538438,
        max: 8.90523746293209,
        avg: 8.759507997840354,
        std: 0.4141260398104629,
      },
      {
        timestamp: '2021-04-01T12:15:02.000Z',
        min: 12.640887331849296,
        max: 14.638620092691255,
        avg: 13.843428978056496,
        std: 0.4643199256188898,
      },
      {
        timestamp: '2021-04-01T12:15:03.000Z',
        min: 5.327965616155359,
        max: 10.208426659955567,
        avg: 8.932795352085435,
        std: 0.4472079185687261,
      },
      {
        timestamp: '2021-04-01T12:15:04.000Z',
        min: 7.258129567492788,
        max: 13.108559575356466,
        avg: 8.117216240344227,
        std: 0.35615869302435266,
      },
      {
        timestamp: '2021-04-01T12:15:05.000Z',
        min: 11.598581351012784,
        max: 11.895447977822926,
        avg: 11.80781369714879,
        std: 0.4959321841167733,
      },
      {
        timestamp: '2021-04-01T12:15:06.000Z',
        min: 12.78486437538769,
        max: 13.797693233521468,
        avg: 13.18064358294495,
        std: 0.2573913081549951,
      },
      {
        timestamp: '2021-04-01T12:15:07.000Z',
        min: 13.006569145997931,
        max: 13.686388343235034,
        avg: 13.509465752418155,
        std: 0.17910544239403092,
      },
      {
        timestamp: '2021-04-01T12:15:08.000Z',
        min: 11.037518365136993,
        max: 11.206424048072154,
        avg: 11.07334162737429,
        std: 0.041706989046818466,
      },
      {
        timestamp: '2021-04-01T12:15:09.000Z',
        min: 11.390575769042183,
        max: 11.61723387167166,
        avg: 11.435601793616723,
        std: 0.37842916767917556,
      },
      {
        timestamp: '2021-04-01T12:15:10.000Z',
        min: 6.299029376141963,
        max: 12.082912598779068,
        avg: 7.70545551101999,
        std: 0.09427968513652973,
      },
      {
        timestamp: '2021-04-01T12:15:11.000Z',
        min: 10.123460950919283,
        max: 11.463162691274215,
        avg: 11.279408972724,
        std: 0.24604302069773876,
      },
      {
        timestamp: '2021-04-01T12:15:12.000Z',
        min: 14.833908503162252,
        max: 14.85497948104226,
        avg: 14.85299030745912,
        std: 0.2785769871104843,
      },
      {
        timestamp: '2021-04-01T12:15:13.000Z',
        min: 9.415129536978544,
        max: 9.653372082375766,
        avg: 9.532735262443556,
        std: 0.4115828662310964,
      },
      {
        timestamp: '2021-04-01T12:15:14.000Z',
        min: 12.498766272662687,
        max: 14.253898270331765,
        avg: 13.004095562205576,
        std: 0.3536141102916186,
      },
    ],
    meta: { id: '8', name: 'VCU' },
  },
};

const stSk = process.env.NEXT_PUBLIC_ST_STREAM_KEY;
const streamKeyToSensorsToItemSuppliedIds: StreamKeyToSensorsToItemSuppliedIds = {
  'U9cSWVb7fvS9k-NQcT28uZG6wtm6xmiG0ctU': {
    '1': ['200050'],
    '2': ['200030', '200060'],
    '3': ['200090', '200100'],
  },
  xPpq7RINNaBYYzxivBHR2_LpqVp68fXVnWQ0: {
    '1': ['200050'],
    '2': ['200030', '200060'],
    '3': ['200090', '200100'],
  },
};
if (stSk)
  streamKeyToSensorsToItemSuppliedIds[stSk] = {
    '1': ['r/216'],
    '2': ['r/1969', 'r/1754', 'r/3238'],
    '3': ['r/589', 'r/607', 'r/511', 'r/573', 'r/564'],
    '4': ['r/3989', 'r/6817'],
    '5': ['r/5467', 'r/4891'],
    '6': ['r/10444'],
    '7': ['r/10635', 'r/1669', 'r/6377', 'r/2760', 'r/5077', 'r/2183'],
    '8': ['r/10798', 'r/9986', 'r/6204'],
  };

export function sensorsToItemSuppliedIds(
  streamKey: string
): SensorsToItemSuppliedIds {
  return streamKeyToSensorsToItemSuppliedIds[streamKey] ?? {};
}

const ids = Object.keys(data);
export function getTimeSeriesData(
  sensorsToIds: SensorsToItemSuppliedIds
): TimeSeriesData {
  function enrich(sensor: RawSensor): Sensor {
    const tsData: TsData = {};

    sensor.data.forEach(
      (d) =>
        (tsData[d.timestamp] = {
          color: calcRedToGreenGradient(
            ((d.avg - MinValue) / (MaxValue - MinValue)) * 100,
            true
          ),
          value: d.avg,
        })
    );

    return {
      data: sensor.data,
      meta: {
        ...sensor.meta,
        itemSuppliedIds: sensorsToIds[sensor.meta.id] ?? [],
        tsData,
      },
    };
  }

  const enriched: Sensors = {};
  const filteredIds = ids.filter((id) => Boolean(sensorsToIds[id]));
  filteredIds.forEach((id) => (enriched[id] = enrich(data[id])));
  return {
    ids: filteredIds,
    sensors: enriched,
    sensorsMeta: filteredIds.map((id) => enriched[id].meta),
    sensorsToIds,
  };
}

export function formatValue(num: number): string {
  return num.toFixed(3);
}
